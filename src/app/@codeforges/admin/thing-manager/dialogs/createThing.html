<h2 mat-dialog-title>Create Thing</h2>

<form [formGroup]="createThingForm" mat-dialog-content>
    <mat-form-field class="w-100">
        <input name="name" formGroupName="name" placeholder="Thing Name" matInput>
    </mat-form-field>
    <mat-form-field class="w-100">
        <mat-label>Thing Type</mat-label>
        <mat-select>
            <mat-option *ngFor="let type of availableThingTypesStream | async" [value]="type.id">
                {{type.name}}
            </mat-option>
        </mat-select>
    </mat-form-field>
    <div class="row d-flex align-items-center">
        <div class="col-6">
            <h4>Attributes</h4>
        </div>
        <div class="col-6 justify-content-end d-flex">
            <button mat-icon-button (click)="addAttribute()" matTooltip="Add attribute">
                <mat-icon>add_circle_outline</mat-icon>
            </button>
        </div>
    </div>
    <div formArrayName="attributes"
         *ngFor="let item of createThingForm.get('attributes').controls; let i = index;">
        <div [formGroupName]="i">
            <mat-form-field class="w-50 pr-2">
                <input formControlName="key" placeholder="Attribute Key" matInput>
            </mat-form-field>
            <mat-form-field class="w-50">
                <input formControlName="value" placeholder="Attribute Value" matInput>
                <button mat-icon-button matSuffix (click)="removeAttribute(i)" matTooltip="Remove attribute">
                    <mat-icon>remove_circle_outline</mat-icon>
                </button>
            </mat-form-field>
        </div>
    </div>
</form>

<mat-dialog-actions>
    <button mat-button mat-dialog-close>Cancel</button>
    <button mat-button (click)="submit()" color="primary">Submit</button>
</mat-dialog-actions>
